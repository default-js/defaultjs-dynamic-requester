(()=>{"use strict";var e={842:(e,t,r)=>{r.r(t),r.d(t,{Requester:()=>T});var n=r(302);class s{constructor(e,t){this.key=e,this.context=t}get keyDefined(){return this.key in this.context}get hasValue(){return!!this.context[this.key]}get value(){return this.context[this.key]}set value(e){this.context[this.key]=e}set append(e){if(this.hasValue){const t=this.value;t instanceof Array?t.push(e):this.value=[this.value,e]}else this.value=e}remove(){delete this.context[this.key]}static load(e,t,r=!0){let n=e;const a=t.split(".");let i=a.shift().trim();for(;a.length>0;){if(!n[i]){if(!r)return null;n[i]={}}n=n[i],i=a.shift().trim()}return new s(i,n)}}const a=function(e){return void 0!==e&&null!=e&&"Object"===e.constructor.name},i=function(e,...t){e||(e={});for(let r of t)a(r)&&Object.getOwnPropertyNames(r).forEach((t=>{a(e[t])?i(e[t],r[t]):e[t]=r[t]}));return e},o=function(){const[e,t,{deep:r=!1,recursive:n=!0,parents:s=[]}={}]=arguments,a={};for(let i in e){const c=e[i],h=t(i,c,e);!h||r&&null!=c?h&&r&&("object"!=typeof c||c instanceof Array||c instanceof Map||c instanceof Set||c instanceof RegExp||s.includes[c]||c==e?a[i]=c:a[i]=o(c,t,{deep:r,recursive:n,parents:s.concat(e)})):a[i]=c}return a},c={isPojo:a,append:function(e,t,r){return void 0!==t&&(s.load(r,e,!0).append=t),r},merge:i,filter:o,buildPropertyFilter:function({names:e,allowed:t}){return(r,n,s)=>e.includes(r)===t},defValue:(e,t,r)=>{Object.defineProperty(e,t,{value:r,writable:!1,configurable:!1,enumerable:!1})},defGet:(e,t,r)=>{Object.defineProperty(e,t,{get:r,configurable:!1,enumerable:!1})},defGetSet:(e,t,r,n)=>{Object.defineProperty(e,t,{get:r,set:n,configurable:!1,enumerable:!1})}};class h{constructor(e){this.hasValue=1==arguments.length,this.value=e}}class l{constructor(e,t){this.data=e,this.resolver=t,this.cache=new Map}updateData(e){this.data=e,this.cache=new Map}resetCache(){this.cache=new Map}getPropertyDef(e,t=!0){if(this.cache.has(e))return this.cache.get(e);let r=null;if(this.data&&e in this.data)r={data:this.data,resolver:this.resolver,defined:!0};else{if(!t)return null;r=((e,t)=>{for(;e;){const r=e.proxy.handle.getPropertyDef(t,!1);if(r)return r;e=e.parent}return{data:null,resolver:null,defined:!1}})(this.resolver.parent,e)}return r.defined&&this.cache.set(e,r),r}hasProperty(e){const{defined:t}=this.getPropertyDef(e);return t}getProperty(e){const{data:t}=this.getPropertyDef(e);return t?t[e]:void 0}setProperty(e,t){const{data:r,defined:n}=this.getPropertyDef(e);n?r[e]=t:(this.data||(this.data={}),this.data[e]=t,this.cache.set(e,{data:this.data,resolver:this.resolver,defined:!0}))}deleteProperty(e){throw new Error("unsupported function!")}}class u{constructor(e,t){this.handle=new l(e,t),this.data=new Proxy(this.handle,{has:function(e,t){return e.hasProperty(t)},get:function(e,t){return e.getProperty(t)},set:function(e,t,r){return e.setProperty(t,r)},deleteProperty:function(e,t){return e.deleteProperty(t)}})}updateData(e){this.handle.updateData(e)}resetCache(){this.handle.resetCache()}}const d=/(\\?)(\$\{(([a-zA-Z0-9\-_\s]+)::)?([^\{\}]+)\})/,f=new h,p=e=>e instanceof h?e:new h(e),y=async function(e,t,r,n){if(r&&e.name!=r)return e.parent?y(e.parent,t,r,n):null;const s=await async function(e,t){if("string"!=typeof e)return e;const r=new Function("context",`\nreturn (async (context) => {\n\ttry{ \n\t\twith(context){\n\t\t\t return ${e}\n\t\t}\n\t}catch(e){\n\t\tthrow e;\n\t}\n})(context)`);let n,s=setTimeout((()=>{s=null,console.warn("long running statement:",e,new Error)}),1e3);try{n=await r(t)}catch(e){}return s&&clearTimeout(s),n}(t,e.proxy.data);return null!=s?s:n instanceof h&&n.hasValue?n.value:void 0},x=async(e,t,r)=>t[1]?t[2]:y(e,t[5],v(t[4]),r),v=e=>e?0==(e=e.trim()).length?null:e:null;class m{constructor({context:e=n.default,parent:t=null,name:r=null}){this.parent=t instanceof m?t:null,this.name=r,this.context=e,this.proxy=new u(this.context,this)}get chain(){return this.parent?this.parent.chain+"/"+this.name:"/"+this.name}get effectiveChain(){return this.context?this.parent?this.parent.effectiveChain+"/"+this.name:"/"+this.name:this.parent?this.parent.effectiveChain:""}get contextChain(){const e=[];let t=this;for(;t;)t.context&&e.push(t.context),t=t.parent;return e}getData(e,t){if(e){if(!t||t==this.name){const t=s.load(this.context,e,!1);return t?t.value:null}this.parent&&this.parent.getData(e,t)}}updateData(e,t,r){e&&(r&&r!=this.name?this.parent&&this.parent.updateData(e,t,r):(null!=this.context&&void 0!==this.context||(this.context={},this.proxy.updateData(this.context)),s.load(this.context,e).value=t,this.proxy.resetCache()))}mergeContext(e,t){t&&t!=this.name?this.parent&&this.parent.mergeContext(e,t):this.context=this.context?c.merge(this.context,e):e}async resolve(e,t){const r=2==arguments.length?p(t):f;try{const t=d.exec(e);return t?await x(this,t,r):await y(this,v(e),null,r)}catch(t){return console.error('error at executing statment"',e,'":',t),r.hasValue?r.value:e}}async resolveText(e,t){let r=e,n=e,s=d.exec(r);const a=2==arguments.length?p(t):f;for(;null!=s;){const e=await x(this,s,a);n=n.split(s[0]).join(),r=r.split(s[0]).join(void 0===e?"undefined":null==e?"null":e),s=d.exec(n)}return r}static async resolve(e,t,r,n){const s=new m({context:t}),a=arguments.length>2?p(r):f;return"number"==typeof n&&n>0?new Promise((t=>{setTimeout((()=>{t(s.resolve(e,a))}),n)})):s.resolve(e,a)}static async resolveText(e,t,r,n){const s=new m({context:t}),a=arguments.length>2?p(r):f;return"number"==typeof n&&n>0?new Promise((t=>{setTimeout((()=>{t(s.resolveText(e,a))}),n)})):s.resolveText(e,a)}static buildSecure({context:e,propFilter:t,option:r={deep:!0},name:n,parent:s}){return e=c.filter({data:e,propFilter:t,option:r}),new m({context:e,name:n,parent:s})}}const g=async(e,t,r,n)=>{const s=new URL(await m.resolveText(t,e),location.href);if(r){s.searchParams||(s.searchParams=new URLSearchParams);const t=s.searchParams;for(let n in r){const s=r[n];if("string"==typeof s)t.append(n,await m.resolveText(s,e));else if(s instanceof Array)for(let r of s)"string"==typeof r&&t.append(n,await m.resolveText(r,e))}}return n&&(s.hash=n),s},w=async(e,t)=>t&&"string"==typeof t?m.resolveText(t,e):"get",P=async(e,t)=>{const r=new Headers;if(t)for(let n in t){const s=t[n];if("string"==typeof s)r.append(n,await m.resolveText(s,e));else if(s instanceof Array)for(let t of s)"string"==typeof t&&r.append(n,await m.resolveText(t,e))}return r},b=async(e,t)=>t&&"string"==typeof t?m.resolveText(t,e):t,T=class{constructor({url:e,method:t="get",search:r,hash:n,headers:s,body:a,credentials:i,mode:o,cache:c,redirect:h,referrer:l,referrerPolicy:u}){this.url=e,this.method=t,this.search=r,this.hash=n,this.headers=s,this.body=a,this.credentials=i,this.mode=o,this.cache=c,this.redirect=h,this.referrer=l,this.referrerPolicy=u}async buildRequest({context:e}){return{url:await g(e,this.url,this.search,this.hash),method:await w(e,this.method),headers:await P(e,this.headers),body:await b(e,this.body),credentials:await m.resolveText(this.credentials,e,this.credentials),mode:await m.resolveText(this.mode,e,this.mode),cache:await m.resolveText(this.cache,e,this.cache),redirect:await m.resolveText(this.redirect,e,this.redirect),referrer:await m.resolveText(this.referrer,e,this.referrer),referrerPolicy:await m.resolveText(this.referrerPolicy,e,this.referrerPolicy)}}async execute({context:e}){const{url:t,method:r,headers:n,body:s,credentials:a,mode:i,cache:o,redirect:c,referrer:h,referrerPolicy:l}=await this.buildRequest({context:e});return fetch(t.toString(),{method:r,headers:n,body:s,credentials:a,mode:i,cache:o,redirect:c,referrer:h,referrerPolicy:l})}}},302:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});const n=void 0!==r.g?r.g:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}}},t={};function r(n){var s=t[n];if(void 0!==s)return s.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,r),a.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{r.r(n),r.d(n,{Requester:()=>t.Requester});var e=r(302),t=r(842);e.default.defaultjs=e.default.defaultjs||{},e.default.defaultjs.DynamicRequester||(e.default.defaultjs.DynamicRequester=t.Requester,t.Requester.VERSION="1.0.4")})()})();
//# sourceMappingURL=browser-defaultjs-dynamic-requester.min.js.map